# JSON2CV
Compiler built in Python that uses a modified version of [Posquit0's Awesome-CV](https://github.com/posquit0/Awesome-CV) LaTeX template to generate a CV in `pdf` format based on a `json` image of the CV.

## Installation
Begin by installing Miktex, which is required in order to be able to compile the intermediate `tex` file generated by the program into a `pdf` file. It is recommended that you go for the [portable edition](https://miktex.org/howto/portable-edition) of Miktex and do the following:
- Follow the instructions listed under the **Download** and **How to Install** sections.
- Go to Windows search and find "Edit the system environment variables", click "Environment Variables". Under "System Variables", look for the variable `Path`, select it then click "Edit". Click "New" and add the absolute path to the Miktex x64 folder; this path should have the form `...\miktex-portable\texmfs\install\miktex\bin\x64`, where `...` is the prefix of the absolute path (i.e. of the form `C:\etc\etc\etc`).
- Extract the json2cv folder from `json2cv.zip` and place it somewhere.

## Basic Usage
Point `cmd` to the json2cv directory; the easiest way to do this is by opening the json2cv directory and typing `cmd` into the address bar of the file explorer. To run the tool, type `json2cv`; you should see an error message asserting the valid arguments that you must or can pass to the tool.

```sh
json2cv
```

The process of generating your cv starts with an image of the CV, which must be a `json` file that follows the json2cv grammar. Since an image essentially represents a version of a cv, it is recommended to give the image file a self-documenting / descriptive name, for example `cv-purpose-date.json`. Inside the json2cv directory, you should see the `samples` folder, which contains an example `resume.json`. You can look into this file and the files in the `sections` folder to get an idea of what a cv image looks like. Let's try to compile the `resume.json` image. To do this, run:

```sh
json2cv .\samples\resume
```

Personal information cannot be provided in the cv image, for security reasons. Instead, this information is directly passed to the tool through the use of flags. If at any time you would like to view all available flags, simply run the `json2cv` command with nothing else. At minimum, we must specify the `name`, `position`, `address`, `mobile`, and `email` flags to ensure that our cv is not [anonymized](#anonymization). Try running this and seeing the difference from the previous output:

```sh
json2cv .\samples\resume -n "Awesome Person" -p "Awesome Position" "Awesome Title" -m "000-000-0000" -e "awesome.person@awesomecompany.com" -l "awesome-person" -a "Awesome Address" -g "awesome-person" -w "awesome-portfolio.io" -c "DC3522" --footer
```

Finally, it's worth noting that you can add the json2cv directory path into your system environment variables `PATH`. This will allow you to run the `json2cv` command anywhere on your system.

## Reporting Issues

When encountering a compile-time issue, such as getting a compile-time error that you shouldn't be getting, or a run-time issue, such as when the generated pdf file is not the expected output, please make sure to include both the `*.log` and `*.debug.log` files corresponding to the erring attempt and a syntactically-equivalent version of your cv image (and whatever external files the image references) in your issue. To obtain the log files, run the tool with the `--debug` flag.

**IMPORTANT PRIVACY DISCLAIMER**: For privacy, we're expecting a syntactically-equivalent version of the cv image and any external files referenced, not the actual files themselves. [Anonymizing](#anonymization) your cv is NOT enough, as the tool is privy to the original content of your cv. The structure is important here, not the text that the pdf ends up containing after compilation. Thus, please make sure to run the tool in debug mode **on a syntactically-equivalent image, not the actual image**, also that **any files referenced in the syntactically-equivalent image are also merely syntactically-equivalent and not the original**, but also that **the file names of all syntactically-equivalent files involved do not contain any sensitive information**, since the logging modules are verbose and will betray the contents and file names of the image and any reference files that the tool happens to compile in the process. As far as I know, the logs should NOT contain the personal information that you provided the tool using flags. However, as I cannot be held accountable for you accidentally leaking your personal information, you **should** also pass the `--anonymized` flag to the tool, just in case.

## Features

### Anonymization

The tool supports an **anonymizing** mode, where personal information and designated text within the cv is anonymized or obfuscated, to allow the cv to be shared with others without giving away personal information. At minimum, in order for a cv to not be anonymized, the tool must be provided with the basic flags. Even if these flags are provided, the cv can still be anonymized by specifying the `--anonymized` flag. As for designated text, in order to designate text as sensitive, you wrap the text in curly braces; but make sure there are no spaces between the curly braces and the sensitive text. By default, if a corresponding label is not provided for designated text, the text will be obfuscated; otherwise it will be anonymized.

```json
"This is non-sensitive text. But {this is sensitive text}. { This text will error}, because there is a space between one of the braces and the sensitive text. If the label 'this is sensitive text' -> 'this is the anonymized version' is provided, the text will anonymize into 'this is the anonymized version'. Otherwise, it will obfuscate into '████ ██ █████████ ████'."
```

### Structure

A cv image is a json object that consists of as many sections as we'd like, each of which contains as many items as we'd like. For now, we will assume that we must define items in this same file, though the next section will shed light on another option. All in all, the structure of a cv image is as follows:

```json
{
  ...
  "Some Section": [
    ...
    {
      ...
    },
    {
      ...
    },
    ...
  ],
  "Other Section": [
    ...
  ],
  ...
}
```

Each section can only contain items that are all of the same type. In turn, the type of item that is within a section will determine the type and appearance of the section in the cv. There are four of these types: `cvparagraph`, `cvskills`, `cventries`, and `cvhonors`. The props we specify in an item will determine its type. Each of the four types has required and optional props. Some props may be common to multiple item types. All four item types and their props are shown below. Keep in mind that this isn't a valid section, since it contains items of different types.

```json
{
  ...
  "Some Section": [
    ...
    {
      "labels": { "some sensitive text": "anonymized version of the text", ... },                       // OPTIONAL
      "paragraph": "This is the first paragraph. It can contain as much text as we want it to."         // REQUIRED
    },
    {
      "labels": { "some sensitive text": "anonymized version of the text", ... },                       // OPTIONAL
      "category": "Some Category",                                                                      //REQUIRED
      "content": "Content or items related to that category."                                           //REQUIRED
    },
    {
      "labels": { "some sensitive text": "anonymized version of the text", ... },                       // OPTIONAL
      "title": "Some Title",                                                                            // REQUIRED
      "subtitle": "Some Subtitle",                                                                      // REQUIRED
      "ttag": "Some Location",                                                                          // REQUIRED
      "btag": "Some Date",                                                                              // REQUIRED
      "details": [                                                                                      // OPTIONAL
        "We can have as many bullet points detailing this entry as we need.",
        ...
      ]
    },
    {
      "labels": { "some sensitive text": "anonymized version of the text", ... },                       // OPTIONAL
      "ltag": "Some Date",                                                                              // REQUIRED
      "title": "Some Title",                                                                            // REQUIRED
      "subtitle": "Some Subtitle",                                                                      // REQUIRED
      "rtag": "Some Info"                                                                               // REQUIRED
    },
    ...
  ],
  ...
}
```

### Modularity

The tool supports a modular approach to image organization. This will be especially beneficial for those who have many items on their history, have multiple item versions, have multiple cv versions that reference the same items, and/or like to be more organized. Instead of defining an item within the sections of a cv image, we can define it in an external collection file and then reference it within the section as follows:

```json
{
  ...
  "Some Section": [
    ...
    "path/to/collection/json/file::some-descriptive-item-identifier",
    ...
  ],
  ...
}
```

A `reference` is essentially a file basename (i.e. without the extension) path, followed by the scope resolution symbol `::`, followed by an item identifier. The item identifier can only consist of alphanumeric characters and certain symbols, with none of the symbols appearing consecutively, and must begin and end with an alphanumeric character. The item identifier is used to index into the collection file referenced in the path portion of the reference string. A collection file follows the format shown below and can contain many items, which are hopefully somehow related.

```json
{
  ...
  "some-descriptive-item-identifier" : {
    ...
  },
  "other-descriptive-item-identifier" : {
    ...
  },
  ...
}
```
